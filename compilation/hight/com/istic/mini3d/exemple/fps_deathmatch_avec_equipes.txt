

type Robot is Character;
type Alien is Character;


Game ;



player1 is Player;
player1 has controller at "human";
player2 is Player;
player2 has controller at "ia_allie";
player3 is Player;
player3 has controller at "ia_allie";
player4 is Player;
player4 has controller at "ia_allie";
player5 is Player;
player5 has controller at "ia_ennemi";
player6 is Player;
player6 has controller at "ia_ennemi";
player7 is Player;
player7 has controller at "ia_ennemi";
player8 is Player;
player8 has controller at "ia_ennemi";

bleu is Team;//robots
rouge is Team;//aliens
 
bleu has elements at player1, player2, player3, player4;
rouge has elements at player5, player6, player7, player8;


sol1 is Ground;

zoneDepart1 is Zone;
zoneDepart2 is Zone;
zoneDepart3 is Zone;
zoneDepart4 is Zone;
zoneDepart5 is Zone;
zoneDepart6 is Zone;

//// armes normales
// 1) pistolet de base
mun1 is Projectile duplicable;
mun1 has damages at 10, lifeTime at 5 s;

chargeur1 is Items duplicable;
chargeur1 has elements at mun1, amount at 12, capacity at 12;

arme1 is Weapon duplicable; 
arme1 has munitions at chargeur1, shootPower at 10, shootInterval 700 ms, reloadTime at 2 s;

// 2) fusil à pompe
mun2 is Projectile duplicable;
mun2 has damages at 40, lifeTime at 3 s;

chargeur2 is Items duplicable;
chargeur2 has elements at mun2, amount at 6, capacity at 6;

arme2 is Weapon duplicable;
arme2 has munitions at chargeur2, shootPower at 15, shootInterval 1 s, reloadTime at 5 s;

// 3) bazooka
mun3 is Projectile duplicable;
mun3 has damages at 120, lifeTime at 5 s;

chargeur3 is Items duplicable;
chargeur3 has elements at mun3, amount at 1, capacity at 1;

arme3 is Weapon duplicable;
arme3 has munitions at chargeur3, shootPower at 10, shootInterval 1 s, reloadTime at 2 s;


//// armes alien
// 4) pistolet laser de base
mun4 is Projectile duplicable;
mun4 has damages at 6, lifeTime at 2 s;

chargeur4 is Items duplicable;
chargeur4 has elements at mun4, amount at -1, capacity at -1;

arme4 is Weapon duplicable;
arme4 has munitions at chargeur4, shootPower at 15, shootInterval 500 ms, reloadTime at 0 s;

// 5) fusil à pompe futuriste
mun5 is Projectile duplicable;
mun5 has damages at 60, lifeTime at 3 s;

chargeur5 is Items duplicable;
chargeur5 has elements at mun5, amount at 8, capacity at 8;

arme5 is Weapon duplicable;
arme5 has munitions at chargeur5, shootPower at 10, shootInterval 800 ms, reloadTime at 6 s;

// 6) trancheur bouclier alien
mun6 is Projectile duplicable;
mun6 has damages at 60, lifeTime at 10 s;

chargeur6 is Items duplicable;
chargeur6 has elements at mun6, amount at 3, capacity at 3;

arme6 is Weapon duplicable;
arme6 has munitions at chargeur6, shootPower at 2, shootInterval 1 s, reloadTime at 1 s;




invArmes is Inventory duplicable;
invArmes has elements arme1;


Character has life at 100, lifeMax at 100, armor at 0, inventories at invArmes; //voir par rapport aux virgules et listes
alien1 is Alien;
alien2 is Alien;
alien3 is Alien;
alien4 is Alien;

remove arme1 from invArmes;
insert arme4 from invArmes;

robot1 is Robot;
robot2 is Robot;
robot3 is Robot;
robot4 is Robot;


//(Character)   (Inventory)   (Weapon)   (Items)      (Projectile)
//            <inventories>  <elements>  <munitions>  <type> 
// humain     -> invArmes   -> arme1   -> chargeur1 -> mun1
//                                     -> nothing
//                          -> nothing
//            -> nothing

// exemple :
//                         | variable  |  partie non-variable en cours de jeu
// robot      -> invArmes   -> arme1   -> chargeur1 -> mun1
//                                     -> nothing
//                          -> arme3   -> chargeur1 -> mun1 //balles
//                                     -> chargeur3 -> mun3 //missile
//                                     -> nothing
//            -> invSoins   -> nothing

// modèle simplifié pour le jeu :
// robot      -> invArmes   -> arme1   -> mun1
//                          -> arme3   -> mun3 //balles
//            -> invSoins   -> nothing



definition tirerPrimaire means
	Character expels (first of munitions of equipedObject of Character) by (shootPower of equipedObject); //faire en sorte que le belonging reste à false, rajouter un mot-clé si nécessaire

/*
definition tirerPrimaire means
	Character shoot;
*/


definition defU1 means 
	jeep move backward by 10;


command alien1 for player1 is
	key Z for defU1
	key Q for defL1,
	key S for defD1,
	key D for defR1,
	mouse up for defU2,
	mouse down for defD2,
	mouse right for defR2,
	mouse left for defL2,
	mouse rclick for tirer;

rule Game begins then
	generate sol,
	generate zoneDepart1,
	generate zoneDepart2,
	generate zoneDepart3,
	generate alien1,
	generate alien2,
	generate alien3,
	generate alien4,
	generate robot1,
	generate robot2,
	generate robot3,
	generate robot4,
	generate equipedObject of alien1,
	generate equipedObject of alien2,
	generate equipedObject of alien3,
	generate equipedObject of alien4,
	generate equipedObject of robot1,
	generate equipedObject of robot2,
	generate equipedObject of robot3,
	generate equipedObject of robot4,
;

rule mun3 effaced then
	generate damageZone of mun3 at (x of position of mun3) (y of position of mun3) (z of position of mun3),
	wait 1 s then
		efface damageZone of mun3
	endwait;


rule alien1 kills Robot then  //par l'intermédiaire d'un projectile
	add 1 to score of player1,
	add 1 to score of rouge;
rule alien2 kills Robot then  
	add 1 to score of player2,
	add 1 to score of rouge;
rule alien3 kills Robot then  
	add 1 to score of player3,
	add 1 to score of rouge;
rule alien4 kills Robot then  
	add 1 to score of player4,
	add 1 to score of rouge;
rule robot1 kills Alien then  
	add 1 to score of player5,
	add 1 to score of bleu;
rule robot2 kills Alien then  
	add 1 to score of player6,
	add 1 to score of bleu;
rule robot3 kills Alien  then  
	add 1 to score of player7,
	add 1 to score of bleu;
rule robot4 kills Alien then  
	add 1 to score of player8,
	add 1 to score of bleu;

rule Character touches Weapon then
	;
rule Character touches Items then



