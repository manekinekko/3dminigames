<!DOCTYPE html>
<html>
    <head>
        <title id="title">3DWIGS</title>
    </head>
	
	<div>
		<div style="width:900px;margin:auto;position:relative" id="container">
			<canvas id="canvas" width="900" height="500"></canvas>
			<div id="framerate" style="position:absolute; left: 750px; top: 20px; background-color: #000; opacity: 0.5;height: 30px; width: 130px; border-radius: 5px;	-moz-border-radius5px;-webkit-border-radius:5px;border: 1px solid #fff;">
				<div id="debug" style="padding: 5px"></div>
			</div>
			<div style="padding: 5px;position:absolute; left: 20px; top: 370px; background-color: #000; opacity: 0.5;height: 100px; width: 400px; border-radius: 5px;	-moz-border-radius5px;-webkit-border-radius:5px;border: 1px solid #fff;">
				<h2 style="margin:0;padding:0;padding-bottom: 5px;font-size: 20px">Demo du moteur3d de 3DWIGS</h2>
				<p style="margin:0;padding:0;padding-bottom: 5px;">Le jeu du lapin </p>
			</div>
		</div>
	</div>
	
    <body>
		<style>
			body{background-color: #000;color: #fff;font-family:arial}
		</style>		
		<script type="text/javascript" src="lib/glge_v0.8/glge-compiled-min.js"></script>
        <script type="text/javascript" src="js/moteur3d.js"></script>
		<script type="text/javascript" src="js/moteur_tools.js"></script>
		<script type="text/javascript" src="js/moteur_management.js"></script>
		<script type="text/javascript" src="js/moteur_collision.js"></script>
		<script type="text/javascript" src="js/moteur_movement.js"></script>
        <script type="text/javascript" src="js/moteur_camera.js"></script>       
		<script type="text/javascript" src="js/moteur_debugger.js"></script>
		<script type="text/javascript" src="js/moteur_keyboard.js"></script>
			   
		<script type="text/javascript">
			
			initScene = function(){
				//M3D.MOTEUR.addObject("lapin","dae/lapin.dae",[0,5,0,0,0,0,1,1,1]);
				M3D.MOTEUR.addObject("sol","dae/sol.dae",[0,-1.2,0,0,0,0,10,10,10]);
				M3D.MOTEUR.addGroup("voiture1",[0,1,0,0,0,0,1,1,1]);
				M3D.MOTEUR.addGroup("voiture2",[10,1,3,0,0,0,1,1,1]);
				M3D.MOTEUR.addObject("jeep1","dae/jeep.dae",[0,0,1,0,0,0,1,1,1],"voiture1");
				M3D.MOTEUR.addObject("chasseur1","dae/chasseur.dae",[0,0,1,0,0,0,1,1,1],"voiture1");
				M3D.MOTEUR.addObject("jeep2","dae/jeep.dae",[0,0,1,0,0,0,1,1,1],"voiture2");
				M3D.MOTEUR.addObject("chasseur2","dae/chasseur.dae",[0,0,1,0,0,0,1,1,1],"voiture2");
			}
	
			M3D.MOTEUR.initialisation('level.xml','canvas');
			setTimeout("initScene()",20);			
			
			panelControl = function(){			
				if(KEY_Z) M3D.MOTEUR.translate("voiture1",[0.1,0,0],false,"voiture1");
				if(KEY_S) M3D.MOTEUR.translate("voiture1",[-0.1,0,0],false,"voiture1");
				if(KEY_Q) M3D.MOTEUR.rotate("voiture1",[0,0.05,0]);
				if(KEY_D) M3D.MOTEUR.rotate("voiture1",[0,-0.05,0]);
				
				if(KEY_T) M3D.MOTEUR.translate("voiture2",[0.1,0,0],false,"voiture2");
				if(KEY_G) M3D.MOTEUR.translate("voiture2",[-0.1,0,0],false,"voiture2");
				if(KEY_F) M3D.MOTEUR.rotate("voiture2",[0,0.01,0],"voiture2");
				if(KEY_H) M3D.MOTEUR.rotate("voiture2",[0,-0.01,0],"voiture2");

				if(KEY_O) M3D.MOTEUR.translateCamera("maincamera",[0.1,0,0],"maincamera");
				if(KEY_L) M3D.MOTEUR.translateCamera("maincamera",[-0.1,0,0],"maincamera");
				if(KEY_U) M3D.MOTEUR.translateCamera("maincamera",[0,0,0.01],"maincamera");
				if(KEY_J) M3D.MOTEUR.translateCamera("maincamera",[0,0,-0.01 ],"maincamera");
				if(KEY_K) M3D.MOTEUR.rotateCamera("maincamera",[0,0.05,0]);
				if(KEY_M) M3D.MOTEUR.rotateCamera("maincamera",[0,-0.05,0]);
				
				if(KEY_SPACE) M3D.MOTEUR.setAngle("voiture2",[1,0,0],"voiture1");
				if(KEY_X) {M3D.MOTEUR.setScale("voiture2",[2,3,4]);M3D.MOTEUR.test();}
				if(KEY_ENTER) M3D.MOTEUR.test();
			}

			rendu = function(){
				panelControl();
				M3D.MOTEUR.render();
			}
			
			setInterval(rendu,1);

			
			window.addEventListener('load', function () {
				window.document.onkeydown = M3D.MOTEUR.checkKeyDown;
				window.document.onkeyup = M3D.MOTEUR.checkKeyUp;
			}, false);

		</script>
    </body>
</html>